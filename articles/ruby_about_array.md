---
title: "Ruby Arrayãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ"
emoji: "ğŸ’"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [ "Ruby" ]
published: true
---

# æ¦‚è¦

Rubyã®Arrayãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ

# é…åˆ—ã®ä½œæˆ

| ã‚³ãƒ¼ãƒ‰                   | å†…å®¹                | ãƒªãƒ³ã‚¯                                                                  |
|-----------------------|-------------------|----------------------------------------------------------------------|
| `Array.new(n, v)`     | è¦ç´ æ•°n å€¤vã®é…åˆ—ã‚’ä½œæˆ     | [LINK](https://docs.ruby-lang.org/ja/latest/method/Array/s/new.html) |
| `(n..m).to_a`         | nã‹ã‚‰mã¾ã§ã®æ•´æ•°é…åˆ—ã‚’ä½œæˆ    |                                                                      |
| `(n..m).step(s).to_a` | nã‹ã‚‰mã¾ã§såˆ»ã¿ã®æ•´æ•°é…åˆ—ã‚’ä½œæˆ |                                                                      |

:::details é…åˆ—ã®ä½œæˆ(ä¾‹)
```ruby: Array.new(n, v)
Array.new(3, "A") # => ["A", "A", "A"]
# ãã‚Œãã‚Œã®è¦ç´ ã‚’åˆ¥ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã—ãŸã„å ´åˆã¯ã€ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç”¨ã„ã‚‹
Array.new(3){Array.new(2, 0)} # => [[0, 0], [0, 0], [0, 0]]
```
```ruby: (n..m).to_a
(1..4).to_a # => [1,2,3,4]
(1...4).to_a # => [1,2,3]
(1..10).step(3).to_a # => [1,4,7,10]
```
:::

# è¦ç´ ã®å–å¾—
| ã‚³ãƒ¼ãƒ‰                      | å†…å®¹                 | ãƒªãƒ³ã‚¯                                                                        |
|--------------------------|--------------------|----------------------------------------------------------------------------|
| `arr[n]`                 | nç•ªç›®ã®è¦ç´ ã‚’å–å¾—          | [LINK](https://docs.ruby-lang.org/ja/latest/method/Array/i/=5b=5d.html)    |
| `arr[n,m]`               | nç•ªç›®ã‹ã‚‰må€‹åˆ†ã®è¦ç´ ã‚’å–å¾—     | [LINK](https://docs.ruby-lang.org/ja/latest/method/Array/i/=5b=5d.html)    |
| `arr[n..m]`              | nç•ªç›®ã‹ã‚‰mç•ªç›®ã¾ã§ã®è¦ç´ ã‚’å–å¾—   | [LINK](https://docs.ruby-lang.org/ja/latest/method/Array/i/=5b=5d.html)    |
| `arr[n...m]`             | nç•ªç›®ã‹ã‚‰m-1ç•ªç›®ã¾ã§ã®è¦ç´ ã‚’å–å¾— | [LINK](https://docs.ruby-lang.org/ja/latest/method/Array/i/=5b=5d.html)    |
| `arr.values_at(n,m,...)` | n,m,...ç•ªç›®ã®è¦ç´ ã‚’å–å¾—    | [LINK](https://docs.ruby-lang.org/ja/latest/method/Array/i/values_at.html) |
| `arr.last(n)`            | æœ€å¾Œã‹ã‚‰nå€‹ã®è¦ç´ ã‚’å–å¾—       |                                                                            |
| `arr.first(n)`           | å…ˆé ­ã‹ã‚‰nå€‹ã®è¦ç´ ã‚’å–å¾—       |                                                                            |

:::details è¦ç´ ã®å–å¾—(ä¾‹)
```ruby
arr = [1,2,3,4,5]

# 1ç•ªç›®ã®è¦ç´ ã‚’å–å¾—
arr[1] # => 2

# 1ç•ªç›®ã‹ã‚‰3ã¤ã®è¦ç´ ã‚’å–å¾—
arr[1,3] # => [2,3,4]

# 2~4ç•ªç›®ã®è¦ç´ ã‚’å–å¾—
arr[2..4] # => [3,4,5]

# è¤‡æ•°è¦ç´ ã‚’å–å¾—
arr.values_at(0,2,4) # => [1,3,5]
arr.values_at(*[0,2,4]) # åŒã˜

# æœ€å¾Œã®è¦ç´ ã‚’nå€‹å–å¾—
arr.last(2) # => [4,5]

# å…ˆé ­ã®è¦ç´ ã‚’nå€‹å–å¾—
arr.first(2) # => [1,2]
```
:::

# é…åˆ—ã®çµåˆ

| ã‚³ãƒ¼ãƒ‰                 | å†…å®¹          | ãƒªãƒ³ã‚¯ |
|---------------------|-------------|-----|
| `arr1 + arr2`       | è¦ç´ ã‚’çµåˆ       |     |
| `arr1.concat(arr2)` | è¦ç´ ã‚’çµåˆ(ç ´å£Šçš„)  |     |
| `arr1 \| arr2`      | é‡è¤‡ãªã—ã§çµåˆ     |     |
| `arr1 - arr2`       | arr1ã‹ã‚‰é‡è¤‡ã‚’å‰Šé™¤ |     |
| `arr1 & arr2`       | å…±é€šé …ã‚’å–å¾—      |     |

:::details é…åˆ—ã®çµåˆ(ä¾‹)
```ruby: arr1 + arr2
a = [1,2]
b = [3,4,5]
a + b # => [1,2,3,4,5]
```
```ruby: arr1.concat(arr2)
a = [1,2]
b = [3,4,5]
a.concat(b)
p a # => [1,2,3,4,5]
```
```ruby: arr1 |-& arr2
a = [1,2,3]
b = [3,4,5]

# é‡è¤‡ãªã—ã§çµåˆ
p a | b # => [1,2,3,4,5]

# è¦ç´ ã‚’é™¤å¤–
p a - b # => [1,2]

# å…±é€šé …ã‚’å–å¾—
p a & b # => [3]
```
:::


# å¤šé‡ä»£å…¥

| ã‚³ãƒ¼ãƒ‰           | å†…å®¹             | ãƒªãƒ³ã‚¯ |
|---------------|----------------|-----|
| a,b,... = arr | å„è¦ç´ ã‚’a,b,...ã«ä»£å…¥ |     |
| a,*b = arr    | æ®‹ã‚Šã®è¦ç´ ã‚’bã«ä»£å…¥     |     |

:::details å¤šé‡ä»£å…¥(ä¾‹)
```ruby
x = [1,2,3,4]
# è¶³ã‚Šãªã„è¦ç´ ã¯ä»£å…¥ã•ã‚Œãªã„
a, b = x
p a # => 1
p b # => 2

# *ã§æ®‹ã‚Šã®è¦ç´ ã‚’å…¨ã¦bã«ä»£å…¥
a, *b = x
p a # => 1
p b # => [2,3,4]

# *ã¯è¦ç´ ã®é€”ä¸­ã§ã‚‚ä½¿ãˆã‚‹
a, *b, c = x
p a # => 1
p b # => [2,3]
p c # => 4
```
:::



# splatæ¼”ç®—å­

| ã‚³ãƒ¼ãƒ‰       | å†…å®¹           | ãƒªãƒ³ã‚¯  |
|-----------|--------------|------|
| `f(*arr)` | arrã‚’å¼•æ•°ã®ã‚ˆã†ã«å±•é–‹ | LINK |

:::details splatæ¼”ç®—å­(ä¾‹)
```ruby
# ã©ã¡ã‚‰ã‚‚åŒã˜
arr.push(1, 2)
arr.push(*[1, 2])
```
```ruby

case x
  # ã©ã¡ã‚‰ã‚‚åŒã˜
when 'A', 'B'
when *['A', 'B']
```
:::

# è¦ç´ ã®è¿½åŠ ãƒ»å‰Šé™¤

| ã‚³ãƒ¼ãƒ‰                      | å†…å®¹                | ãƒªãƒ³ã‚¯ |
|--------------------------|-------------------|-----|
| `arr.push(x,y,...)`      | è¦ç´ x,y,...ã‚’æœ«å°¾ã«è¿½åŠ    |     |
| `arr << x << y <<...`    | è¦ç´ x,y,...ã‚’æœ«å°¾ã«è¿½åŠ    |     |
| `arr.unshift(x,y,...)`   | è¦ç´ x,y,...ã‚’å…ˆé ­ã«è¿½åŠ    |     |
| `arr.insert(i, v)`       | è¦ç´ vã‚’iç•ªç›®ã«è¿½åŠ         |     |
| `arr.delete(v)`          | å€¤ãŒvã®è¦ç´ ã‚’å‰Šé™¤         |     |
| `arr.delete_if{\|x\| x}` | ãƒ–ãƒ­ãƒƒã‚¯è©•ä¾¡ãŒtrueã®è¦ç´ ã‚’å‰Šé™¤ |     |

:::details è¦ç´ ã®è¿½åŠ ãƒ»å‰Šé™¤(ä¾‹)
```ruby: push, <<
a = [1,2,3]
a.push(4) # [1,2,3,4]
a << 5 # [1,2,3,4,5]

# è¤‡æ•°è¦ç´ ã‚’è¿½åŠ 
a2 = [1,2,3]
a2.push(4,5) # [1,2,3,4,5]
# a2 << 4 << 5 ã¨åŒã˜
```
```ruby: unshift, insert
# å…ˆé ­ã«è¿½åŠ 
b = [1,2,3]
b.unshift(0) # [0,1,2,3]

# ä»»æ„ã®ä½ç½®ã«è¿½åŠ 
c = [1,2,3]
c.insert(2, 99) # [1,2,99,3]
```
```ruby: delete
a = ['A', 'B', 'C']
a.delete('B')
p a # => ["A", "C"]
```
```ruby: delete_if
a = [1,2,3,4,5,6]
a.delete_if do |n|
  # å¥‡æ•°ã®ã¿å‰Šé™¤
  n.odd?
end
p a # => [2, 4, 6]
```
:::


# ãƒ«ãƒ¼ãƒ—

| ã‚³ãƒ¼ãƒ‰                                    | å†…å®¹                        | ãƒªãƒ³ã‚¯ |
|----------------------------------------|---------------------------|-----|
| `arr.each{\|v\| ... }`                 | å„è¦ç´ ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã«æ¸¡ã™               |     |
| `arr.each_with_index{\|v, idx\| ... }` | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä»˜ãã§ãƒ–ãƒ­ãƒƒã‚¯ã«æ¸¡ã™          |
| `(n..m).each{\|n\| ... }`              | nã‹ã‚‰mã¾ã§ã®æ•´æ•°ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã«æ¸¡ã™         |     |
| `(n..m).step(s).each{\|v\| ... }`      | nã‹ã‚‰mã¾ã§såˆ»ã¿ã®æ•´æ•°ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã«æ¸¡ã™      |     |
| `n.times{\|v\| ... }`                  | 0ã‹ã‚‰n-1ã¾ã§ã®å€¤ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã«æ¸¡ã™(nå›ãƒ«ãƒ¼ãƒ—) |     |
| `n.upto(m){\|v\| ... }`                | nã‹ã‚‰mã¾ã§ã®æ•´æ•°ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã«æ¸¡ã™         |     |
| `n.downto(m){\|v\| ... }`              | nã‹ã‚‰mã¾ã§ã®æ•´æ•°ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã«æ¸¡ã™         |     |

:::details ãƒ«ãƒ¼ãƒ—(ä¾‹)
```ruby: each
arr = [1,2,3]
arr.each{|n| puts n} #=> 1 2 3
```
```ruby: each_with_index
arr = ["A", "B", "C"]
arr.each_with_index{|v,idx| puts "#{idx}:v"} # => "0:A" "1:B" "2:C"
```
```ruby: (n..m).each, step
(1..4).each{|n| puts n} # => 1 2 3 4
(1...4).each{|n| puts n} # => 1 2 3
(1..10).step(3){|n| puts n} # => 1 4 7 10
```
```ruby: times
3.times{print"Hey!"} # => Hey!Hey!Hey!
```
```ruby: upto, downto
5.upto(7){|n| puts n} # => 5 6 7
7.upto(5){|n| puts n} # => 7 6 5
5.step(10, 2){|n| puts n} # => 5 7 9
```
:::



# é…åˆ—ã®æ¢ç´¢

| ã‚³ãƒ¼ãƒ‰                                   | å†…å®¹                       | ãƒªãƒ³ã‚¯ |
|---------------------------------------|--------------------------|-----|
| `arr.map{\|v\| ... }`                 | å„è¦ç´ ã‚’è©•ä¾¡ã—ã€æ–°ã—ã„é…åˆ—ã‚’ç”Ÿæˆ         |     |
| `arr.map.with_index{\|v, idx\| ... }` | å„è¦ç´ è©•ä¾¡ã—ã€æ–°ã—ã„é…åˆ—ã‚’ç”Ÿæˆ(ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä»˜) |     |
| `arr.select{\|v\| ... }`              | æ¡ä»¶ã‚’æº€ãŸã™è¦ç´ ã‚’è¿”å´              |     |
| `arr.reject{\|v\| ... }`              | æ¡ä»¶ã‚’æº€ãŸã•ãªã„è¦ç´ ã‚’è¿”å´            |     |
| `arr.find{\|v\| ... }`                | æ¡ä»¶ã‚’æº€ãŸã™æœ€åˆã®è¦ç´ ã‚’è¿”å´           |     |
| `arr.sum{\|v\| ... }`                 | å„è¦ç´ ã®åˆè¨ˆã‚’å–å¾—                |     |

:::details é…åˆ—ã®æ¢ç´¢(ä¾‹)
```ruby: map
# å„è¦ç´ ã‚’è©•ä¾¡ã—ã€æ–°ã—ã„é…åˆ—ã‚’è¿”å´
a = [1,2,3]
b = a.map{|n| n * 10}
p b # => [10, 20, 30]
```
```ruby: map.with_index
a = ["A", "B", "C"]
b = a.map.with_index{|x, i| "#{i}: #{x}"}
p b # => ["0: A", "1: B", "2: C"]
```
```ruby: select, reject
# æ¡ä»¶ã‚’æº€ãŸã™è¦ç´ ã‚’è¿”å´
a = [1,2,3]
b = a.select {|n| n >= 2}
p b # => [2,3]

# æ¡ä»¶ã‚’æº€ãŸã•ãªã„è¦ç´ ã‚’è¿”å´
a = [1,2,3]
b = a.reject {|n| n >= 2}
p b # => [1]
```
```ruby: find
# æ¡ä»¶ã‚’æº€ãŸã—ãŸæœ€åˆã®è¦ç´ ã‚’è¿”å´
a = [1,2,3]
b = a.find{|n| n >= 2}
p b # => 2
```
```ruby: sum
# å„è¦ç´ ã®åˆè¨ˆã‚’å–å¾—
a = [1,2,3]
b = a.sum
p b # => 6

# ãƒ–ãƒ­ãƒƒã‚¯ã‚‚æŒ‡å®šå¯èƒ½
a = [1,2,3]
b = a.sum{|n| n**2}
p b # => 14
```
:::


# æ–‡å­—åˆ—

| ã‚³ãƒ¼ãƒ‰           | å†…å®¹          | ãƒªãƒ³ã‚¯ |
|---------------|-------------|-----|
| `arr.join(s)` | å„è¦ç´ ã‚’æ–‡å­—åˆ—sã§çµåˆ |     |

:::details æ–‡å­—åˆ—(ä¾‹)
```ruby: join
# å„è¦ç´ ã‚’çµåˆ
a = [1,2,3]
p a.join("+") # => "1+2+3"
```
:::

# å‚è€ƒãƒªãƒ³ã‚¯
[Rubyãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹: class Array](https://docs.ruby-lang.org/ja/latest/class/Array.html)
[Rubyãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹: class Range](https://docs.ruby-lang.org/ja/latest/class/Range.html)